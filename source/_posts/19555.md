---
layout: post
title: ".NET 4.0 New Feature - Tuple"
date: 2010-11-19 12:59:23
comments: true
categories: [C#]
description: ".NET 4.0 New Feature - Tuple"
---
<p>.NET 4.0在System命名空間下新增了Tuple泛型類別，用以儲存特定數目和順序的值，可做臨時性的儲存與滿足方法具有多個回傳值的需求。</p>  <p> </p>  <p>.NET 4.0內建有8種Tuple泛型類別，各自帶有不同數量的泛型屬性成員。</p>  <p><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="139" alt="image" src="\images\posts\19555\image_thumb_3.png" width="308" border="0" /></a></p>  <p> </p>  <p>這些Tuple泛型類別皆實作了IStructuralEquatable, IStructuralComparable, IComparable, ITuple介面，其中ITuple介面在.NET Framework 4.0中並未開出。</p>  <p><a href="http://files.dotblogs.com.tw/larrynung/1011/.NET4.0NewFeatureTuple_AEEE/image_4.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="33" alt="image" src="\images\posts\19555\image_thumb_1.png" width="446" border="0" /></a></p>  <p> </p>  <p>在Tuple泛型類別的建立上，可透過Tuple輔助類別的Create靜態方法來做建立Tuple泛型類別的動作。</p>  <p><a href="http://files.dotblogs.com.tw/larrynung/1011/.NET4.0NewFeatureTuple_AEEE/image_12.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="402" alt="image" src="\images\posts\19555\image_thumb_5.png" width="448" border="0" /></p>  <p> </p>  <p>像是下面範例就是在示範如何透過Tuple輔助類別來建立Tuple&lt;T1, T2, T3, T4&gt;的物件實體：</p>  <div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:6580d1a1-56b9-43a4-8e1c-0e5bacbc8907" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre name="code" class="c#">var tupleVar= Tuple.Create(1,2,3,4);</pre></div>

<p> </p>

<p>除了透過Tuple輔助類別外，也可以直接透過Tuple泛型類別的建構子來做建構的動作：</p>

<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:c9668e97-36c2-4cab-bcde-eff7f87b82e2" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre name="code" class="c#">var tupleVar = New Tuple&lt;Integer, Integer, Integer, Integer&gt;(1, 2, 3, 4);</pre></div>

<p> </p>

<p>Tuple泛型類別建構出物件實體後，就可以透過其屬性來使用了，這邊來看一下參數最多的Tuple&lt;T1, T2, T3, T4, T5, T6, T7, TRest&gt;類別屬性，Tuple泛型類別的泛型屬性成員都為ItemN的格式命名，使用上得清楚知道各元素所存放的值為何才行。</p>

<p><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="400" alt="image" src="\images\posts\19555\image_thumb_4.png" width="444" border="0" /></p>

<p> </p>

<p>這邊看下來可能大家會有點覺得這樣我用ArrayList去取代就好了，其實我也有點這種感覺，反正也無法從屬性中明確知道其存放值的用途，但是由於Tuple有實做IStructuralEquatable、 IStructuralComparable、IComparable這幾個介面的關係，它具有能依照元素順序去做比較大小、相等判別、與排序的功能，另外就是在使用上Tuple可以不需要轉型，個人猜測這些特性才是Tuple的主要賣點。</p>

<p> </p>

<h2>範例 </h2>

<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:c7de43ab-f94d-483c-8405-0949727eb690" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre name="code" class="c#">using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {            
            var var1 = Tuple.Create(1, 2, 1);
            var var2 = Tuple.Create(1, 1, 2);

            Console.WriteLine("Var1 : {0}", var1);
            Console.WriteLine("Var2 : {0}", var2);
            Console.WriteLine("Var1 == Var2 : {0}", var1 == var2);
            Console.WriteLine("Var1.Equals(Var2) : {0}", var1.Equals(var2));
            Console.WriteLine("(Var1 as IComparable).CompareTo(Var2) : {0}", (var1 as IComparable).CompareTo(var2));

            Console.WriteLine();

            Console.WriteLine("Original Array...");
            var tupeArray = new Tuple&lt;int, int, int&gt;[] { var1, var2 };
            foreach (var item in tupeArray)
                Console.WriteLine(item);

            Console.WriteLine();

            Console.WriteLine("Sorted Array...");
            Array.Sort(tupeArray);
            foreach (var item in tupeArray)
                Console.WriteLine(item);
        }
    }
}</pre></div>

<p> </p>

<p>運行結果如下：</p>

<p><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="523" alt="image" src="\images\posts\19555\image_thumb.png" width="457" border="0" /></p>

<p> </p>

<h2>Link</h2>

<ul>
  <li>Tuple 類別 </li>

  <li>[你必須知道的.NET]第三十二回，，深入.NET 4.0之，Tuple一二 </li>
</ul>