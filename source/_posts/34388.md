---
layout: post
title: "[C++][Visual Studio]Visual studio 2010 C++0x new feature: lambda"
date: 2011-08-26 12:58:26
comments: true
tags: [C++,Visual Studio]
description: "[C++][Visual Studio]Visual studio 2010 C++0x new feature: lambda"
---
<p>
	Visual studio 2010為C++的開發人員新增了lambda這個C++0x的功能，為一沒有名稱的方法，也可將之稱為匿名方法。多使用於方法主題較短、方法較不常觸發或較不適合放為成員方法...等情境。</p>
<p>
	 </p>
<p>
	使用上類似下面這樣：</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:3f9ce686-ad7b-420d-bd4e-af321f221870" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
auto lambda = [](int val1, int val2)
{
	return val1 + val2;
};
	
auto result = lambda(1,2);</pre>
</div>
<p>
	 </p>
<p>
	這是一個很簡單的例子，設定一個lambda表示式允許接受兩個參數val1與val2，並將兩數相加後回傳。</p>
<p>
	 </p>
<p>
	若要指定lambda的回傳值型態，可透過在lambda後面加上"-&gt;"指定回傳的型態。</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:90ce63eb-3e3a-42d0-accf-ddf9b398ce60" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
auto lambda = [](int val1, int val2) -&gt; int
{
	return val1 + val2;
};
	
auto result = lambda(1,2);</pre>
</div>
<p>
	 </p>
<p>
	若是想直接使用lambda主體外的參數，可在中括號內加入"="，表示能將需要的lambda主體外的參數以傳值的方式傳入使用。</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:710f29d2-a2cf-40c8-9abe-5e78b26cbb45" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
int val1 = 1;
int val2 = 2;
int result;

auto lambda = [=]() -&gt; int
{
	return val1 + val2;
};
	
result = lambda();</pre>
</div>
<p>
	 </p>
<p>
	若想以傳址的方式傳入lambda主體使用，可使用"&amp;"關鍵字，像是下面程式想在lambda主體內存取主體外的result變數，可在中括號內加入"&amp;result"，指定result變數以傳址的方式傳入lambda主體。</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:dd08795a-756f-4ecb-a5a3-f0be98e31472" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
int result;
auto lambda = [&amp;result](int val1, int val2)
{
	result = val1 + val2;
};
	
lambda(1,2);</pre>
</div>
<p>
	 </p>
<p>
	要傳址的參數過多的話，我們也可以直接在中括號內加入"&amp;"就好。</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:c22fdb63-47cb-4592-b2bb-cced9eced4bc" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
int result;
auto lambda = [&amp;](int val1, int val2)
{
	result = val1 + val2;
};
	
lambda(1,2);</pre>
</div>
<p>
	 </p>
<p>
	若有的要傳址有的要傳值的話，可將兩者混用，像是下面這樣。</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:6814a634-964a-4210-9ac3-ac8ed542f6bd" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
int val1 = 1;
int val2 = 2;
int result;

auto lambda = [=, &amp;result]()
{
	result = val1 + val2;
};
	
lambda();</pre>
</div>
<p>
	 </p>
<h2>
	Link</h2>
<ul>
	<li>
		Lambda Expressions in C++</li>
	<li>
		Lambda Expression Syntax</li>
	<li>
		Examples of Lambda Expressions</li>
</ul>
