---
layout: post
title: "[C++][Visual Studio]Visual studio 2010 C++0x new feature: rvalue reference"
date: 2011-09-01 01:24:16
comments: true
categories: [Visual Studio,C++]
description: "[C++][Visual Studio]Visual studio 2010 C++0x new feature: rvalue reference"
---
<p>
	Visual studio 2010為C++的開發人員新增了rvalue reference這個C++0x的功能，主要是用來解決過多臨時變數的問題，讓開發人員可以寫出更有效率的 C++ 程式碼。</p>
<p>
	 </p>
<p>
	rvalue reference又稱為右值引用，是沒有名稱的臨時變數，在記憶體上沒有固定的位址，這邊可以從大家最熟悉的字串串接來看：</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:2af8ca5e-f848-4add-97ef-bae9156a586e" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
string str1 = "123";
string str2 = "456";
string str3 = str1 + str2 + "789" + "101112";</pre>
</div>
<p>
	 </p>
<p>
	以上面這個例子來說，大家都知道在自串串接時會有臨時變數的耗費，也就是在上面程式中的str1 + str2那邊會先將變數的串接完的值存在一個臨時的變數。這邊談到的概念可參閱string類別的+運算子實作。</p>
<p>
	<img alt="image" border="0" height="356" src="\images\posts\34975\image_thumb.png" style="border-bottom: 0px; border-left: 0px; border-top: 0px; border-right: 0px" width="450" /></p>
<p>
	 </p>
<p>
	這樣的問題在運算頻繁時會更加嚴重。而若是這樣的臨時變數能讓我們引用，利用臨時變數的引用重覆去運算，可有效的改善這樣的問題，rvalue reference就是這樣的技術。</p>
<p>
	 </p>
<p>
	rvalue reference在使用上跟以前我們使用的lvalue reference類似，lvalue reference是用&amp;去取得引用，而rvalue reference是用&amp;&amp;去取得引用。rvalue reference在Visual Studio 2010已經整入至標準函式庫內，故可直接參閱標準函式庫的做法，像是在string類別內就有用rvalue reference去實作新的+運算子。</p>
<p>
	<img alt="image" border="0" height="577" src="\images\posts\34975\image_thumb_1.png" style="border-bottom: 0px; border-left: 0px; border-top: 0px; border-right: 0px" width="512" /></p>
<p>
	 </p>
<h2>
	Link</h2>
<ul>
	<li>
		A Brief Introduction to Rvalue References</li>
	<li>
		VC2010中的C++0x特性Part 2：右值引用</li>
</ul>
