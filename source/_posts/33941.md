---
layout: post
title: "[C++][Visual Studio]Visual studio 2010 C++0x new feature: auto"
date: 2011-08-23 12:39:30
comments: true
categories: [C++,Visual Studio]
description: "[C++][Visual Studio]Visual studio 2010 C++0x new feature: auto"
---
<p>
	Visual studio 2010為C++的開發人員新增了auto這個C++0x的功能，讓變數宣告時的型態能由編譯器自動判別，自動依照初始值的型態去決定變數的型態，使得複雜的類型宣告能有更簡單的宣告方式。雖然變數的型態是由初始值判斷，但是是編譯時期所作的處理，在編譯到MSIL時就會用正確的型態去替換，故不會影響程式運行的效能，也是型別安全的編程方式。這也就是C#與VB.Net領域在.Net 3.0所提供的區域型別推斷功能。</p>
<p>
	 </p>
<p>
	使用的語法如下:</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:a0f3d7c2-7bc4-4d41-8f5c-f7ff066fe024" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
auto declarator initializer;</pre>
</div>
<p>
	 </p>
<p>
	使用auto關鍵字宣告變數，宣告的同時需指定初始值，如此編譯器才能從初始值推斷出變數的型別。因此auto不能用來宣告陣列、做為函式的回傳值、方法或 樣板的參數。</p>
<p>
	 </p>
<p>
	最後來看個範例加深印象：</p>
<div class="wlWriterSmartContent" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:90af77a7-ec36-44f0-8f6c-12080df9ea47" style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px">
	<pre class="c" name="code">
// test auto.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include &lt;string&gt;
#include &lt;list&gt;
#include &lt;map&gt;

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
	auto x = 1, *y = &amp;x, **z = &amp;y; // Resolves to int.
	auto a(2.01), *b (&amp;a);         // Resolves to double.
	auto c = 'a', *d(&amp;c);          // Resolves to char.
	auto m = 1, &amp;n = m;            // Resolves to int.

	map&lt;int,list&lt;string&gt;&gt; mapObj;
	map&lt;int,list&lt;string&gt;&gt;::iterator i1 = mapObj.begin();
	auto i2 = mapObj.begin();

	auto lambda = []()-&gt;int
	{
		return 0;
	};
	return 0;
}</pre>
</div>
<p>
	 </p>
<h2>
	Link</h2>
<ul>
	<li>
		VS2010 中的 C++ 0x 新特性：Lambdas、auto 和 static_assert</li>
	<li>
		C++0x: auto 和 decltype</li>
	<li>
		C++ 語法再加強：C++0x</li>
	<li>
		auto Keyword (Type Deduction)</li>
</ul>
