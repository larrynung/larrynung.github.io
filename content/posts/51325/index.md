---
title: "[Visual Studio]強制Visual Studio執行垃圾回收"
date: "2011-11-03 09:58:50"
description: "[Visual Studio]強制Visual Studio執行垃圾回收"
tags: [Visual Studio]
---

<p>Visual Studio是一個很大的程式，絕大部分採用Managed Code，由很多不同的部門所共同開發，允許整合許多好用的外掛，有時候會吃掉很多的資源，這時我們可以透過Visual Studio內建的功能強制執行垃圾回收。可以將已經不用的記憶體回收，讓Visual Studio可在更多的記憶體下運行，像是在做效能量測時可能就可以運行這樣的功能清一下被吃掉的資源，減少會影響量測數據的潛在因素。</p>  <p> </p>  <p>要使用時按下快速鍵[Ctrl + Shift + Alt + F12]兩次，或是建立個工具列按鈕讓它執行ToolsForceGC的Command就可以了。</p>  <p><img style="border-right-width: 0px; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" border="0" alt="image" src="\images\posts\51325\image_thumb.png" width="644" height="372" /></a></p>  <p> </p>  <p>這邊筆者實際測試一下，使用Visual Studio開啟一個幾乎是空的WPF專案，光專案開起來記憶體就佔用了145,732K，實體記憶體也總共用了65%。</p>  <p><a href="http://files.dotblogs.com.tw/larrynung/1111/51d7731288bc_12D11/image_4.png"><img style="border-bottom: 0px; border-left: 0px; border-top: 0px; border-right: 0px" border="0" alt="image" src="\images\posts\51325\image_thumb_1.png" width="569" height="610" /></a> </p>  <p> </p>  <p>將專案關閉，可以看到記憶體的耗費仍是不變。</p>  <p><a href="http://files.dotblogs.com.tw/larrynung/1111/51d7731288bc_12D11/image_6.png"><img style="border-bottom: 0px; border-left: 0px; border-top: 0px; border-right: 0px" border="0" alt="image" src="\images\posts\51325\image_thumb_2.png" width="569" height="610" /></a> </p>  <p> </p>  <p>強制Visual Studio進行垃圾回收後，記憶體佔用變為121,836K，實體記憶體總佔用量降為63%。</p>  <p><a href="http://files.dotblogs.com.tw/larrynung/1111/51d7731288bc_12D11/image_8.png"><img style="border-bottom: 0px; border-left: 0px; border-top: 0px; border-right: 0px" border="0" alt="image" src="\images\posts\51325\image_thumb_3.png" width="569" height="610" /></a> </p>  <p> </p>  <h2>Link</h2>  <ul>   <li><a href="http://dotneteers.net/blogs/petersm/archive/2010/12/16/vs-net-consumes-too-much-memory-force-a-gc.aspx" target="_blank">VS.NET consumes too much memory? Force a GC!</a> </li>    <li><a href="http://blogs.msdn.com/b/camerons/archive/2010/12/15/force-vs-to-garbage-collect.aspx" target="_blank">Force VS to garbage collect</a> </li>    <li><a href="http://jasper-net.blogspot.com/2010/12/force-vs-to-garbage-collect.html" target="_blank">Force VS to garbage collect </li> </ul>
